<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Grotti Prototype Validation Portal</title>
<link href="https://fonts.googleapis.com/css2?family=Bodoni+Moda:ital,opsz,wght@0,6..96,400;0,6..96,700;0,6..96,900;1,6..96,400&family=DM+Sans:wght@300;400;500;600;700&family=JetBrains+Mono:wght@400;500&display=swap" rel="stylesheet">
<style>
  :root {
    --rosso-corsa: #DC143C;
    --rosso-deep: #A00E2B;
    --rosso-glow: #FF2D55;
    --carbon-900: #0A0A0A;
    --carbon-800: #141414;
    --carbon-700: #1E1E1E;
    --carbon-600: #2A2A2A;
    --carbon-500: #3A3A3A;
    --carbon-400: #555;
    --carbon-300: #888;
    --carbon-200: #BBB;
    --carbon-100: #E0E0E0;
    --gold-accent: #C9A84C;
    --gold-light: #E8D48B;
    --success: #2ECC71;
    --warning: #F39C12;
    --danger: #E74C3C;
    --font-display: 'Bodoni Moda', serif;
    --font-body: 'DM Sans', sans-serif;
    --font-mono: 'JetBrains Mono', monospace;
  }

  * { margin: 0; padding: 0; box-sizing: border-box; }

  body {
    background: var(--carbon-900);
    color: var(--carbon-100);
    font-family: var(--font-body);
    overflow-x: hidden;
    line-height: 1.6;
  }

  /* Carbon fiber background texture */
  body::before {
    content: '';
    position: fixed;
    top: 0; left: 0; right: 0; bottom: 0;
    background:
      repeating-linear-gradient(
        0deg,
        transparent,
        transparent 2px,
        rgba(255,255,255,0.01) 2px,
        rgba(255,255,255,0.01) 4px
      ),
      repeating-linear-gradient(
        90deg,
        transparent,
        transparent 2px,
        rgba(255,255,255,0.01) 2px,
        rgba(255,255,255,0.01) 4px
      );
    pointer-events: none;
    z-index: 0;
  }

  /* â”€â”€â”€ HEADER â”€â”€â”€ */
  .header {
    position: sticky;
    top: 0;
    z-index: 100;
    background: linear-gradient(180deg, rgba(10,10,10,0.98) 0%, rgba(10,10,10,0.92) 100%);
    backdrop-filter: blur(20px);
    border-bottom: 1px solid rgba(220,20,60,0.2);
    padding: 0 2rem;
  }

  .header-inner {
    max-width: 1400px;
    margin: 0 auto;
    display: flex;
    align-items: center;
    justify-content: space-between;
    height: 72px;
  }

  .logo-group {
    display: flex;
    align-items: center;
    gap: 1rem;
  }

  .logo-mark {
    width: 44px;
    height: 44px;
    background: linear-gradient(135deg, var(--rosso-corsa), var(--rosso-deep));
    border-radius: 4px;
    display: flex;
    align-items: center;
    justify-content: center;
    font-family: var(--font-display);
    font-weight: 900;
    font-size: 1.5rem;
    color: white;
    letter-spacing: -1px;
    box-shadow: 0 0 20px rgba(220,20,60,0.3);
  }

  .logo-text {
    display: flex;
    flex-direction: column;
    line-height: 1.1;
  }

  .logo-text .brand {
    font-family: var(--font-display);
    font-weight: 700;
    font-size: 1.25rem;
    color: white;
    letter-spacing: 3px;
    text-transform: uppercase;
  }

  .logo-text .sub {
    font-size: 0.65rem;
    color: var(--carbon-300);
    letter-spacing: 4px;
    text-transform: uppercase;
    font-weight: 500;
  }

  .header-meta {
    display: flex;
    align-items: center;
    gap: 2rem;
  }

  .status-pill {
    display: flex;
    align-items: center;
    gap: 0.5rem;
    background: rgba(46,204,113,0.1);
    border: 1px solid rgba(46,204,113,0.25);
    border-radius: 100px;
    padding: 0.35rem 1rem;
    font-size: 0.75rem;
    font-weight: 600;
    color: var(--success);
    letter-spacing: 1px;
    text-transform: uppercase;
  }

  .status-dot {
    width: 7px;
    height: 7px;
    background: var(--success);
    border-radius: 50%;
    animation: pulse 2s infinite;
  }

  @keyframes pulse {
    0%, 100% { opacity: 1; box-shadow: 0 0 0 0 rgba(46,204,113,0.4); }
    50% { opacity: 0.7; box-shadow: 0 0 0 6px rgba(46,204,113,0); }
  }

  .header-date {
    font-family: var(--font-mono);
    font-size: 0.75rem;
    color: var(--carbon-400);
  }

  /* â”€â”€â”€ ODOMETER DISPLAY â”€â”€â”€ */
  .odo-display {
    display: flex;
    align-items: center;
    gap: 0.5rem;
    background: rgba(220,20,60,0.08);
    border: 1px solid rgba(220,20,60,0.2);
    border-radius: 8px;
    padding: 0.35rem 1rem;
  }

  .odo-label {
    font-family: var(--font-mono);
    font-size: 0.6rem;
    letter-spacing: 2px;
    text-transform: uppercase;
    color: var(--carbon-400);
  }

  .odo-value {
    font-family: var(--font-mono);
    font-size: 1.1rem;
    font-weight: 500;
    color: white;
    letter-spacing: 1px;
  }

  .odo-unit {
    font-family: var(--font-mono);
    font-size: 0.7rem;
    color: var(--carbon-400);
  }

  /* â”€â”€â”€ MAIN LAYOUT â”€â”€â”€ */
  .main {
    position: relative;
    z-index: 1;
    max-width: 1400px;
    margin: 0 auto;
    padding: 2rem;
  }

  /* â”€â”€â”€ SECTION CARDS â”€â”€â”€ */
  .section-card {
    background: linear-gradient(145deg, rgba(20,20,20,0.9), rgba(14,14,14,0.95));
    border: 1px solid rgba(255,255,255,0.06);
    border-radius: 12px;
    padding: 2rem;
    margin-bottom: 1.5rem;
    position: relative;
    overflow: hidden;
    animation: fadeUp 0.6s ease-out both;
  }

  .section-card::before {
    content: '';
    position: absolute;
    top: 0; left: 0;
    width: 4px;
    height: 100%;
    background: linear-gradient(180deg, var(--rosso-corsa), transparent);
    border-radius: 4px 0 0 4px;
  }

  @keyframes fadeUp {
    from { opacity: 0; transform: translateY(20px); }
    to { opacity: 1; transform: translateY(0); }
  }

  .section-card:nth-child(2) { animation-delay: 0.1s; }
  .section-card:nth-child(3) { animation-delay: 0.2s; }
  .section-card:nth-child(4) { animation-delay: 0.3s; }
  .section-card:nth-child(5) { animation-delay: 0.4s; }
  .section-card:nth-child(6) { animation-delay: 0.5s; }

  .section-label {
    font-family: var(--font-mono);
    font-size: 0.65rem;
    letter-spacing: 3px;
    text-transform: uppercase;
    color: var(--rosso-corsa);
    margin-bottom: 0.5rem;
    font-weight: 500;
  }

  .section-title {
    font-family: var(--font-display);
    font-size: 1.75rem;
    font-weight: 700;
    color: white;
    margin-bottom: 1rem;
    letter-spacing: 0.5px;
  }

  .section-desc {
    color: var(--carbon-300);
    font-size: 0.9rem;
    max-width: 720px;
    line-height: 1.7;
  }

  /* â”€â”€â”€ GRID LAYOUTS â”€â”€â”€ */
  .grid-2 {
    display: grid;
    grid-template-columns: 1fr 1fr;
    gap: 1.5rem;
  }

  .grid-3 {
    display: grid;
    grid-template-columns: 1fr 1fr 1fr;
    gap: 1rem;
  }

  /* â”€â”€â”€ HERO / OVERVIEW â”€â”€â”€ */
  .hero-section {
    position: relative;
    padding: 3rem 2rem;
    margin-bottom: 1.5rem;
    border-radius: 16px;
    overflow: hidden;
    background:
      radial-gradient(ellipse at 20% 50%, rgba(220,20,60,0.15) 0%, transparent 60%),
      linear-gradient(135deg, var(--carbon-800), var(--carbon-900));
    border: 1px solid rgba(220,20,60,0.12);
    animation: fadeUp 0.5s ease-out both;
  }

  .hero-badge {
    display: inline-flex;
    align-items: center;
    gap: 0.5rem;
    background: rgba(220,20,60,0.12);
    border: 1px solid rgba(220,20,60,0.25);
    border-radius: 100px;
    padding: 0.4rem 1rem;
    font-family: var(--font-mono);
    font-size: 0.7rem;
    color: var(--rosso-glow);
    letter-spacing: 2px;
    text-transform: uppercase;
    margin-bottom: 1.5rem;
  }

  .hero-title {
    font-family: var(--font-display);
    font-size: clamp(2rem, 4vw, 3.25rem);
    font-weight: 900;
    color: white;
    line-height: 1.1;
    margin-bottom: 0.75rem;
    letter-spacing: -0.5px;
  }

  .hero-title .italic {
    font-style: italic;
    color: var(--rosso-corsa);
  }

  .hero-subtitle {
    font-size: 1rem;
    color: var(--carbon-300);
    max-width: 640px;
    line-height: 1.7;
    margin-bottom: 2rem;
  }

  /* Stats bar */
  .stats-row {
    display: flex;
    gap: 2.5rem;
    flex-wrap: wrap;
  }

  .stat-item {
    display: flex;
    flex-direction: column;
  }

  .stat-value {
    font-family: var(--font-mono);
    font-size: 1.5rem;
    font-weight: 500;
    color: white;
  }

  .stat-value .unit {
    font-size: 0.75rem;
    color: var(--carbon-400);
    margin-left: 2px;
  }

  .stat-label {
    font-size: 0.7rem;
    color: var(--carbon-400);
    letter-spacing: 2px;
    text-transform: uppercase;
    margin-top: 0.25rem;
  }

  /* â”€â”€â”€ TABLE STYLES â”€â”€â”€ */
  .data-table {
    width: 100%;
    border-collapse: collapse;
    margin-top: 1.25rem;
    font-size: 0.85rem;
  }

  .data-table thead th {
    font-family: var(--font-mono);
    font-size: 0.65rem;
    letter-spacing: 2px;
    text-transform: uppercase;
    color: var(--carbon-400);
    padding: 0.75rem 1rem;
    text-align: left;
    border-bottom: 1px solid rgba(255,255,255,0.06);
    font-weight: 500;
  }

  .data-table tbody td {
    padding: 0.85rem 1rem;
    border-bottom: 1px solid rgba(255,255,255,0.03);
    color: var(--carbon-200);
  }

  .data-table tbody tr:hover {
    background: rgba(220,20,60,0.04);
  }

  .data-table input,
  .data-table select {
    background: var(--carbon-700);
    border: 1px solid var(--carbon-500);
    color: var(--carbon-100);
    padding: 0.5rem 0.75rem;
    border-radius: 6px;
    font-family: var(--font-body);
    font-size: 0.8rem;
    width: 100%;
    transition: border-color 0.2s;
  }

  .data-table input:focus,
  .data-table select:focus {
    outline: none;
    border-color: var(--rosso-corsa);
    box-shadow: 0 0 0 3px rgba(220,20,60,0.15);
  }

  /* â”€â”€â”€ FORM INPUTS â”€â”€â”€ */
  .form-group {
    margin-bottom: 1rem;
  }

  .form-label {
    display: block;
    font-size: 0.75rem;
    font-weight: 600;
    color: var(--carbon-300);
    letter-spacing: 1px;
    text-transform: uppercase;
    margin-bottom: 0.4rem;
  }

  .form-input,
  .form-textarea,
  .form-select {
    width: 100%;
    background: var(--carbon-700);
    border: 1px solid var(--carbon-500);
    color: var(--carbon-100);
    padding: 0.65rem 1rem;
    border-radius: 8px;
    font-family: var(--font-body);
    font-size: 0.85rem;
    transition: border-color 0.2s;
  }

  .form-textarea {
    resize: vertical;
    min-height: 100px;
  }

  .form-input:focus,
  .form-textarea:focus,
  .form-select:focus {
    outline: none;
    border-color: var(--rosso-corsa);
    box-shadow: 0 0 0 3px rgba(220,20,60,0.15);
  }

  /* â”€â”€â”€ BUTTONS â”€â”€â”€ */
  .btn {
    display: inline-flex;
    align-items: center;
    gap: 0.5rem;
    padding: 0.7rem 1.5rem;
    border: none;
    border-radius: 8px;
    font-family: var(--font-body);
    font-size: 0.8rem;
    font-weight: 600;
    letter-spacing: 1px;
    text-transform: uppercase;
    cursor: pointer;
    transition: all 0.25s;
  }

  .btn-primary {
    background: linear-gradient(135deg, var(--rosso-corsa), var(--rosso-deep));
    color: white;
    box-shadow: 0 4px 15px rgba(220,20,60,0.3);
  }

  .btn-primary:hover {
    transform: translateY(-1px);
    box-shadow: 0 6px 25px rgba(220,20,60,0.45);
  }

  .btn-ghost {
    background: transparent;
    color: var(--carbon-300);
    border: 1px solid var(--carbon-500);
  }

  .btn-ghost:hover {
    border-color: var(--rosso-corsa);
    color: var(--rosso-corsa);
  }

  /* â”€â”€â”€ AERO HIGHLIGHT CARD â”€â”€â”€ */
  .aero-card {
    background:
      radial-gradient(ellipse at 80% 20%, rgba(220,20,60,0.08) 0%, transparent 50%),
      linear-gradient(145deg, rgba(20,20,20,0.9), rgba(14,14,14,0.95));
    border: 1px solid rgba(220,20,60,0.2);
    border-radius: 12px;
    padding: 2.5rem;
    position: relative;
    overflow: hidden;
    margin-bottom: 1.5rem;
    animation: fadeUp 0.6s ease-out 0.3s both;
  }

  .aero-card::before {
    content: '';
    position: absolute;
    top: 0; left: 0;
    width: 100%;
    height: 3px;
    background: linear-gradient(90deg, var(--rosso-corsa), var(--gold-accent), var(--rosso-corsa));
  }

  .aero-card::after {
    content: 'âš ';
    position: absolute;
    top: 1.5rem;
    right: 2rem;
    font-size: 2.5rem;
    opacity: 0.15;
  }

  .aero-tag {
    display: inline-block;
    background: rgba(220,20,60,0.15);
    border: 1px solid rgba(220,20,60,0.3);
    color: var(--rosso-glow);
    font-family: var(--font-mono);
    font-size: 0.65rem;
    letter-spacing: 3px;
    text-transform: uppercase;
    padding: 0.3rem 0.75rem;
    border-radius: 4px;
    margin-bottom: 1rem;
  }

  .rating-group {
    display: flex;
    gap: 0.5rem;
    margin-top: 0.5rem;
  }

  .rating-btn {
    width: 40px;
    height: 40px;
    display: flex;
    align-items: center;
    justify-content: center;
    background: var(--carbon-700);
    border: 1px solid var(--carbon-500);
    border-radius: 8px;
    color: var(--carbon-300);
    font-family: var(--font-mono);
    font-size: 0.8rem;
    cursor: pointer;
    transition: all 0.2s;
  }

  .rating-btn:hover,
  .rating-btn.active {
    background: rgba(220,20,60,0.15);
    border-color: var(--rosso-corsa);
    color: var(--rosso-glow);
  }

  /* â”€â”€â”€ CONTRACT â”€â”€â”€ */
  .contract-section {
    background:
      linear-gradient(145deg, rgba(201,168,76,0.03), rgba(14,14,14,0.95));
    border: 1px solid rgba(201,168,76,0.15);
    border-radius: 12px;
    padding: 2.5rem;
    margin-bottom: 1.5rem;
    position: relative;
    animation: fadeUp 0.6s ease-out 0.5s both;
  }

  .contract-section::before {
    content: '';
    position: absolute;
    top: 0; left: 0;
    width: 4px;
    height: 100%;
    background: linear-gradient(180deg, var(--gold-accent), transparent);
    border-radius: 4px 0 0 4px;
  }

  .contract-clause {
    display: flex;
    gap: 1rem;
    align-items: flex-start;
    padding: 0.75rem 0;
    border-bottom: 1px solid rgba(255,255,255,0.03);
  }

  .contract-clause:last-child { border-bottom: none; }

  .clause-num {
    font-family: var(--font-mono);
    font-size: 0.7rem;
    color: var(--gold-accent);
    min-width: 28px;
    padding-top: 2px;
  }

  .clause-text {
    color: var(--carbon-200);
    font-size: 0.85rem;
    line-height: 1.6;
  }

  /* â”€â”€â”€ DAMAGE LOG â”€â”€â”€ */
  .severity-badge {
    display: inline-flex;
    align-items: center;
    gap: 0.35rem;
    padding: 0.25rem 0.65rem;
    border-radius: 100px;
    font-family: var(--font-mono);
    font-size: 0.65rem;
    letter-spacing: 1px;
    text-transform: uppercase;
    font-weight: 500;
  }

  .severity-badge.low {
    background: rgba(46,204,113,0.1);
    color: var(--success);
    border: 1px solid rgba(46,204,113,0.2);
  }

  .severity-badge.medium {
    background: rgba(243,156,18,0.1);
    color: var(--warning);
    border: 1px solid rgba(243,156,18,0.2);
  }

  .severity-badge.high {
    background: rgba(231,76,60,0.1);
    color: var(--danger);
    border: 1px solid rgba(231,76,60,0.2);
  }

  /* â”€â”€â”€ FOOTER â”€â”€â”€ */
  .footer {
    text-align: center;
    padding: 3rem 2rem;
    border-top: 1px solid rgba(255,255,255,0.04);
    margin-top: 1rem;
  }

  .footer-brand {
    font-family: var(--font-display);
    font-size: 1rem;
    font-weight: 700;
    color: var(--carbon-400);
    letter-spacing: 5px;
    text-transform: uppercase;
    margin-bottom: 0.5rem;
  }

  .footer-sub {
    font-size: 0.7rem;
    color: var(--carbon-500);
    font-family: var(--font-mono);
    letter-spacing: 2px;
  }

  /* â”€â”€â”€ RESPONSIVE â”€â”€â”€ */
  @media (max-width: 768px) {
    .header-inner { padding: 0; }
    .header-meta .status-pill,
    .header-meta .header-date { display: none; }
    .main { padding: 1rem; }
    .grid-2, .grid-3 { grid-template-columns: 1fr; }
    .hero-section { padding: 2rem 1.5rem; }
    .stats-row { gap: 1.5rem; }
    .aero-card { padding: 1.5rem; }
    .section-card { padding: 1.5rem; }
    .data-table { font-size: 0.8rem; }
    .data-table thead th,
    .data-table tbody td { padding: 0.6rem 0.5rem; }
  }

  /* â”€â”€â”€ SCROLLBAR â”€â”€â”€ */
  ::-webkit-scrollbar { width: 6px; }
  ::-webkit-scrollbar-track { background: var(--carbon-900); }
  ::-webkit-scrollbar-thumb { background: var(--carbon-600); border-radius: 3px; }
  ::-webkit-scrollbar-thumb:hover { background: var(--carbon-500); }
</style>
</head>
<body>

<!-- â•â•â•â•â•â•â•â•â•â•â•â• HEADER â•â•â•â•â•â•â•â•â•â•â•â• -->
<header class="header">
  <div class="header-inner">
    <div class="logo-group">
      <div class="logo-mark">G</div>
      <div class="logo-text">
        <span class="brand">Grotti</span>
        <span class="sub">Prototype Validation</span>
      </div>
    </div>
    <div class="header-meta">
      <div class="odo-display" id="odoDisplay">
        <div class="odo-label">Current ODO</div>
        <div class="odo-value" id="odoValue">â€”</div>
        <div class="odo-unit">mi</div>
      </div>
      <div class="status-pill">
        <span class="status-dot"></span>
        Testing Active
      </div>
      <div class="header-date" id="headerDate"></div>
    </div>
  </div>
</header>

<main class="main">

  <!-- â•â•â•â•â•â•â•â•â•â•â•â• 1. PROJECT OVERVIEW / HERO â•â•â•â•â•â•â•â•â•â•â•â• -->
  <section class="hero-section">
    <div class="hero-badge">â—†&ensp;Confidential â€” Factory Test Program</div>
    <h1 class="hero-title">
      Prototype <span class="italic">Validation</span> Portal
    </h1>
    <p class="hero-subtitle">
      Grotti Automobili has selected <strong style="color:white;">Redline Motorsports</strong> as the designated Factory Test Team for the validation phase of the upcoming re-release prototype. All telemetry, wear data, and aerodynamic feedback is to be submitted through this portal.
    </p>
    <div class="stats-row">
      <div class="stat-item">
        <div class="stat-value">2,500<span class="unit">mi</span></div>
        <div class="stat-label">Target Mileage</div>
      </div>
      <div class="stat-item">
        <div class="stat-value"><span id="heroLogged">â€”</span><span class="unit">mi</span></div>
        <div class="stat-label">Logged to Date</div>
      </div>
      <div class="stat-item">
        <div class="stat-value">14<span class="unit">days</span></div>
        <div class="stat-label">Remaining</div>
      </div>
      <div class="stat-item">
        <div class="stat-value"><span id="heroDrivers">6</span></div>
        <div class="stat-label">Test Drivers</div>
      </div>
    </div>
  </section>

  <!-- â•â•â•â•â•â•â•â•â•â•â•â• COMPLETION PROGRESS â•â•â•â•â•â•â•â•â•â•â•â• -->
  <div class="section-card" style="margin-bottom:1.5rem;">
    <div class="section-label">SYS.001 â€” Validation Progress</div>
    <div class="section-title">Completion Progress</div>
    <div style="margin-top:1rem;">
      <div style="height:8px;background:var(--carbon-600);border-radius:4px;">
        <div style="height:100%;width:0%;background:linear-gradient(90deg,var(--rosso-corsa),var(--rosso-glow));border-radius:4px;transition:width 1s ease;" id="progressBar"></div>
      </div>
      <div style="display:flex;justify-content:space-between;margin-top:0.4rem;">
        <span style="font-family:var(--font-mono);font-size:0.7rem;color:var(--carbon-400);" id="progressText">Loadingâ€¦</span>
        <span style="font-family:var(--font-mono);font-size:0.7rem;color:var(--rosso-glow);" id="progressPct">â€”</span>
      </div>
    </div>
  </div>

  <!-- â•â•â•â•â•â•â•â•â•â•â•â• 2. TELEMETRY & DATA COLLECTION â•â•â•â•â•â•â•â•â•â•â•â• -->
  <section class="section-card">
    <div class="section-label">TEL.001 â€” Data Ingestion</div>
    <div class="section-title">Telemetry &amp; Data Collection</div>
    <p class="section-desc">Log session data including mileage and subjective feedback at key speed intervals. Each driver session must include an odometer start/end reading.</p>

    <table class="data-table">
      <thead>
        <tr>
          <th>Driver</th>
          <th>Date</th>
          <th>ODO Start</th>
          <th>ODO End</th>
          <th>0â€“60 Feel</th>
          <th>100+ Feel</th>
          <th>Notes</th>
        </tr>
      </thead>
      <tbody id="telemetryBody">
        <tr>
          <td><input type="text" placeholder="Full name"></td>
          <td><input type="date"></td>
          <td><input type="number" class="odo-start-input" placeholder="0000"></td>
          <td><input type="number" placeholder="0000"></td>
          <td>
            <select>
              <option value="">Select</option>
              <option>Exceptional</option>
              <option>Strong</option>
              <option>Adequate</option>
              <option>Sluggish</option>
              <option>Unstable</option>
            </select>
          </td>
          <td>
            <select>
              <option value="">Select</option>
              <option>Planted</option>
              <option>Confident</option>
              <option>Neutral</option>
              <option>Nervous</option>
              <option>Dangerous</option>
            </select>
          </td>
          <td><input type="text" placeholder="Session notes..."></td>
        </tr>
      </tbody>
    </table>
    <div style="margin-top:1.25rem;display:flex;gap:0.75rem;align-items:center;">
      <button class="btn btn-primary" onclick="submitTelemetry()">Submit Session</button>
      <span id="telStatus" style="font-family:var(--font-mono);font-size:0.75rem;color:var(--carbon-400);margin-left:0.5rem;"></span>
    </div>
  </section>

  <!-- â•â•â•â•â•â•â•â•â•â•â•â• 3. DAMAGE & WEAR LOG â•â•â•â•â•â•â•â•â•â•â•â• -->
  <section class="section-card">
    <div class="section-label">DMG.001 â€” Structural Integrity</div>
    <div class="section-title">Damage &amp; Wear Log</div>
    <p class="section-desc">Report any mechanical issues, cosmetic damage, or abnormal wear patterns. All reports are timestamped and forwarded to Grotti Engineering for review.</p>

    <div class="grid-2" style="margin-top:1.25rem;gap:1.25rem;">
      <div>
        <div class="form-group">
          <label class="form-label">Component / Area</label>
          <select class="form-select" id="dmgComponent">
            <option value="">Select component...</option>
            <option>Engine â€” Block</option>
            <option>Engine â€” Exhaust</option>
            <option>Transmission</option>
            <option>Suspension â€” Front</option>
            <option>Suspension â€” Rear</option>
            <option>Brakes â€” Front</option>
            <option>Brakes â€” Rear</option>
            <option>Body Panel â€” Front</option>
            <option>Body Panel â€” Side</option>
            <option>Body Panel â€” Rear</option>
            <option>Interior â€” Seats</option>
            <option>Interior â€” Dash</option>
            <option>Electrical</option>
            <option>Tires / Wheels</option>
            <option>Other</option>
          </select>
        </div>
        <div class="form-group">
          <label class="form-label">Severity</label>
          <select class="form-select" id="dmgSeverity">
            <option value="">Select severity...</option>
            <option>Cosmetic â€” Minor</option>
            <option>Cosmetic â€” Notable</option>
            <option>Mechanical â€” Low</option>
            <option>Mechanical â€” Medium</option>
            <option>Mechanical â€” Critical</option>
            <option>Safety â€” Immediate</option>
          </select>
        </div>
        <div class="form-group">
          <label class="form-label">Odometer at Incident</label>
          <input type="number" class="form-input" id="dmgOdometer" placeholder="Current mileage">
        </div>
      </div>
      <div>
        <div class="form-group">
          <label class="form-label">Description of Issue</label>
          <textarea class="form-textarea" id="dmgDescription" placeholder="Describe the damage, wear, or mechanical fault in detail. Include driving conditions at time of incident..."></textarea>
        </div>
        <div class="form-group">
          <label class="form-label">Reported By</label>
          <input type="text" class="form-input" id="dmgDriver" placeholder="Driver name">
        </div>
      </div>
    </div>

    <div style="margin-top:0.5rem;display:flex;gap:0.75rem;align-items:center;">
      <button class="btn btn-primary" onclick="submitDamage()">Submit Report</button>
      <span id="dmgStatus" style="font-family:var(--font-mono);font-size:0.75rem;color:var(--carbon-400);margin-left:0.5rem;"></span>
    </div>

    <!-- Live entries from Google Sheet -->
    <div style="margin-top:1.5rem;padding-top:1rem;border-top:1px solid rgba(255,255,255,0.04);" id="dmgRecentSection">
      <div style="font-size:0.65rem;color:var(--carbon-400);letter-spacing:2px;text-transform:uppercase;margin-bottom:0.75rem;">Recent Entries</div>
      <table class="data-table" style="margin-top:0;">
        <thead>
          <tr>
            <th>Date</th>
            <th>Component</th>
            <th>Severity</th>
            <th>Driver</th>
          </tr>
        </thead>
        <tbody id="dmgRecentBody">
          <tr>
            <td colspan="4" style="text-align:center;color:var(--carbon-400);font-style:italic;padding:1.5rem;">Loading from spreadsheetâ€¦</td>
          </tr>
        </tbody>
      </table>
    </div>
  </section>

  <!-- â•â•â•â•â•â•â•â•â•â•â•â• 4. HIGH-SPEED STABILITY INVESTIGATION â•â•â•â•â•â•â•â•â•â•â•â• -->
  <section class="aero-card">
    <div class="aero-tag">â—† Priority â€” Investigation Required</div>
    <div class="section-title" style="font-size:2rem;">High-Speed Stability Concern</div>
    <p class="section-desc" style="margin-bottom:1.5rem;">
      During initial testing, Grotti Engineering has flagged an <strong style="color:var(--rosso-glow);">unresolved high-speed stability issue</strong> with the prototype. At sustained speeds above 100 MPH, drivers have reported the rear end feeling light and unsettled â€” particularly through long sweeping corners and under hard braking. There appears to be <strong style="color:white;">insufficient downforce on the rear axle</strong>, causing the back end to lose traction unpredictably. The root cause has not yet been determined and may relate to the current rear bodywork configuration. We need the test team's input to help identify what's causing the issue and what modification might resolve it.
    </p>

    <div class="grid-3" style="margin-bottom:1.5rem;">
      <div style="background:var(--carbon-700);padding:1.25rem;border-radius:10px;border:1px solid rgba(255,255,255,0.04);">
        <div style="font-size:0.65rem;color:var(--carbon-400);letter-spacing:2px;text-transform:uppercase;margin-bottom:0.5rem;">Reported Symptom</div>
        <div style="font-size:0.9rem;color:var(--carbon-200);font-weight:600;">Rear-End Lift at Speed</div>
        <p style="font-size:0.8rem;color:var(--carbon-400);margin-top:0.3rem;">Above 100 MPH the rear feels light and floaty. The back of the car appears to be generating lift rather than being pushed down onto the road surface.</p>
      </div>
      <div style="background:var(--carbon-700);padding:1.25rem;border-radius:10px;border:1px solid rgba(255,255,255,0.04);">
        <div style="font-size:0.65rem;color:var(--carbon-400);letter-spacing:2px;text-transform:uppercase;margin-bottom:0.5rem;">Reported Symptom</div>
        <div style="font-size:0.9rem;color:var(--carbon-200);font-weight:600;">Oversteer Under Braking</div>
        <p style="font-size:0.8rem;color:var(--carbon-400);margin-top:0.3rem;">Hard braking from high speed causes the rear to step out. The back of the car doesn't seem to have enough aerodynamic load keeping it planted during deceleration.</p>
      </div>
      <div style="background:var(--carbon-700);padding:1.25rem;border-radius:10px;border:1px solid rgba(255,255,255,0.04);">
        <div style="font-size:0.65rem;color:var(--carbon-400);letter-spacing:2px;text-transform:uppercase;margin-bottom:0.5rem;">Reported Symptom</div>
        <div style="font-size:0.9rem;color:var(--carbon-200);font-weight:600;">Cornering Instability</div>
        <p style="font-size:0.8rem;color:var(--carbon-400);margin-top:0.3rem;">Through fast corners the rear slides more than expected. Airflow over the rear deck may not be managing downforce effectively in the current configuration.</p>
      </div>
    </div>

    <div class="grid-2">
      <div>
        <div class="form-group">
          <label class="form-label">Which symptom did you experience?</label>
          <select class="form-select" id="aeroTestType">
            <option value="">Select...</option>
            <option>Rear-end lift at sustained high speed</option>
            <option>Oversteer / rear stepping out under braking</option>
            <option>Rear sliding in fast corners</option>
            <option>General instability above 100 MPH</option>
            <option>Crosswind sensitivity at speed</option>
            <option>Other (describe below)</option>
          </select>
        </div>
        <div class="form-group">
          <label class="form-label">Severity of the issue (1 = Barely noticeable, 10 = Dangerous)</label>
          <div class="rating-group" id="stabilityRating">
            <button class="rating-btn" onclick="setRating('stabilityRating', 1)">1</button>
            <button class="rating-btn" onclick="setRating('stabilityRating', 2)">2</button>
            <button class="rating-btn" onclick="setRating('stabilityRating', 3)">3</button>
            <button class="rating-btn" onclick="setRating('stabilityRating', 4)">4</button>
            <button class="rating-btn" onclick="setRating('stabilityRating', 5)">5</button>
            <button class="rating-btn" onclick="setRating('stabilityRating', 6)">6</button>
            <button class="rating-btn" onclick="setRating('stabilityRating', 7)">7</button>
            <button class="rating-btn" onclick="setRating('stabilityRating', 8)">8</button>
            <button class="rating-btn" onclick="setRating('stabilityRating', 9)">9</button>
            <button class="rating-btn" onclick="setRating('stabilityRating', 10)">10</button>
          </div>
        </div>
        <div class="form-group">
          <label class="form-label">How confident are you in the car's rear grip? (1 = No confidence, 10 = Fully planted)</label>
          <div class="rating-group" id="downforceRating">
            <button class="rating-btn" onclick="setRating('downforceRating', 1)">1</button>
            <button class="rating-btn" onclick="setRating('downforceRating', 2)">2</button>
            <button class="rating-btn" onclick="setRating('downforceRating', 3)">3</button>
            <button class="rating-btn" onclick="setRating('downforceRating', 4)">4</button>
            <button class="rating-btn" onclick="setRating('downforceRating', 5)">5</button>
            <button class="rating-btn" onclick="setRating('downforceRating', 6)">6</button>
            <button class="rating-btn" onclick="setRating('downforceRating', 7)">7</button>
            <button class="rating-btn" onclick="setRating('downforceRating', 8)">8</button>
            <button class="rating-btn" onclick="setRating('downforceRating', 9)">9</button>
            <button class="rating-btn" onclick="setRating('downforceRating', 10)">10</button>
          </div>
        </div>
      </div>
      <div>
        <div class="form-group">
          <label class="form-label">What do you think is causing the issue? What would you recommend to fix it?</label>
          <textarea class="form-textarea" id="aeroFeedback" style="min-height:195px;" placeholder="Based on your driving experience, what do you think is causing the rear instability? Consider the current rear bodywork, airflow over the back of the car, and what might be missing or could be added to improve high-speed grip. Be as specific as possible..."></textarea>
        </div>
      </div>
    </div>
    <div style="margin-top:1rem;display:flex;gap:0.75rem;align-items:center;">
      <button class="btn btn-primary" onclick="submitAero()">Submit Feedback</button>
      <span id="aeroStatus" style="font-family:var(--font-mono);font-size:0.75rem;color:var(--carbon-400);margin-left:0.5rem;"></span>
    </div>
  </section>

  <!-- â•â•â•â•â•â•â•â•â•â•â•â• 5. CONTRACT TERMS â•â•â•â•â•â•â•â•â•â•â•â• -->
  <section class="contract-section">
    <div class="section-label" style="color:var(--gold-accent);">LGL.001 â€” Binding Terms</div>
    <div class="section-title">Validation Contract Terms</div>
    <p class="section-desc" style="margin-bottom:1.25rem;">
      The following terms govern the Factory Test Team agreement between <strong style="color:white">Grotti Automobili</strong> and <strong style="color:white">Redline Motorsports</strong>.
    </p>

    <div class="contract-clause">
      <span class="clause-num">Â§1</span>
      <span class="clause-text">Redline Motorsports ("Test Team") shall accumulate a minimum of <strong style="color:white">2,500 validated miles</strong> on the designated prototype within the testing window.</span>
    </div>
    <div class="contract-clause">
      <span class="clause-num">Â§2</span>
      <span class="clause-text">All telemetry sessions must be logged via the Prototype Validation Portal. Incomplete or unsigned entries will not count toward the mileage requirement.</span>
    </div>
    <div class="contract-clause">
      <span class="clause-num">Â§3</span>
      <span class="clause-text">A minimum of <strong style="color:white">three (3) stability feedback reports</strong> must be submitted with severity and grip ratings regarding the high-speed handling concern.</span>
    </div>
    <div class="contract-clause">
      <span class="clause-num">Â§4</span>
      <span class="clause-text"><strong style="color:var(--gold-accent)">Upon successful completion</strong> of the validation mileage, data submission requirements, and showcase obligations, <strong style="color:white">full ownership of the prototype shall be transferred to Redline Motorsports</strong>, free and clear of any liens or encumbrances.</span>
    </div>

    <div style="margin-top:1.5rem;padding:1.25rem;background:rgba(201,168,76,0.06);border:1px solid rgba(201,168,76,0.12);border-radius:8px;display:flex;align-items:center;gap:1rem;">
      <span style="font-size:1.5rem;">ðŸ“‹</span>
      <div>
        <div style="font-size:0.85rem;color:var(--carbon-100);font-weight:600;">Digital Acknowledgement</div>
        <div style="font-size:0.8rem;color:var(--carbon-400);margin-top:0.2rem;">Both parties have digitally acknowledged these terms. Contract ID: <span style="font-family:var(--font-mono);color:var(--gold-accent);">GRT-RDL-2026-0217</span></div>
      </div>
    </div>
  </section>

</main>

<!-- â•â•â•â•â•â•â•â•â•â•â•â• FOOTER â•â•â•â•â•â•â•â•â•â•â•â• -->
<footer class="footer">
  <div class="footer-brand">Grotti Ã— Redline</div>
  <div class="footer-sub">Factory Test Program â€” Confidential Portal v2.1.0</div>
</footer>

<script>
  // â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
  // CONFIGURATION â€” Paste your Google Apps Script URL below
  // â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
  const API_URL = 'https://script.google.com/macros/s/AKfycbxOSMqsZE2FmPYm-TzABAdI1vK15W2dcCFkuQyqykOkYMCfjCmHVJTVpBosQwXR59bi/exec';
  // After deploying, replace with something like:
  // 'https://script.google.com/macros/s/AKfycbx.../exec'
  // â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•

  const TARGET_MILEAGE = 2500;

  // Set header date
  document.getElementById('headerDate').textContent = new Date().toLocaleDateString('en-US', {
    weekday: 'long', year: 'numeric', month: 'long', day: 'numeric'
  });

  // â”€â”€â”€ Rating buttons â”€â”€â”€
  let ratingValues = { stabilityRating: 0, downforceRating: 0 };

  function setRating(groupId, value) {
    ratingValues[groupId] = value;
    const group = document.getElementById(groupId);
    const buttons = group.querySelectorAll('.rating-btn');
    buttons.forEach((btn, i) => {
      btn.classList.toggle('active', i < value);
    });
  }

  // â”€â”€â”€ Current Odometer (will be overwritten by sheet data) â”€â”€â”€
  let currentOdo = 0;

  function updateOdoDisplay(odo) {
    currentOdo = odo;
    document.getElementById('odoValue').textContent = odo.toLocaleString();
    document.getElementById('heroLogged').textContent = odo.toLocaleString();
    const pct = Math.min((odo / TARGET_MILEAGE) * 100, 100).toFixed(1);
    document.getElementById('progressBar').style.width = pct + '%';
    document.getElementById('progressText').textContent = odo.toLocaleString() + ' / ' + TARGET_MILEAGE.toLocaleString() + ' mi';
    document.getElementById('progressPct').textContent = pct + '%';
  }

  // Auto-fill ODO Start on focus
  document.querySelectorAll('.odo-start-input').forEach(input => {
    input.addEventListener('focus', function() {
      if (!this.value) this.value = currentOdo;
    });
  });

  // â”€â”€â”€ LOAD LIVE DATA FROM GOOGLE SHEET â”€â”€â”€
  async function loadDashboardData() {
    if (API_URL === 'YOUR_APPS_SCRIPT_URL_HERE') {
      console.warn('API_URL not configured â€” using placeholder data');
      updateOdoDisplay(0);
      renderDamageEntries([]);
      return;
    }

    try {
      const res = await fetch(API_URL, { redirect: 'follow' });
      const text = await res.text();
      console.log('API raw response:', text);

      let data;
      try {
        data = JSON.parse(text);
      } catch (parseErr) {
        console.error('Failed to parse API response as JSON:', parseErr);
        console.error('Raw text was:', text.substring(0, 500));
        return;
      }

      console.log('Parsed API data:', data);

      if (data.error) {
        console.error('API error:', data.error);
        return;
      }

      // Update ODO from latest telemetry
      if (data.telemetry) {
        console.log('Telemetry data:', data.telemetry);
        updateOdoDisplay(data.telemetry.currentOdo || 0);
        document.getElementById('heroDrivers').textContent = data.telemetry.driverCount || 0;
      }

      // Render damage entries
      if (data.damage) {
        renderDamageEntries(data.damage);
      }

    } catch (err) {
      console.error('Failed to load dashboard data:', err);
    }
  }

  // â”€â”€â”€ RENDER DAMAGE ENTRIES â”€â”€â”€
  function renderDamageEntries(entries) {
    const tbody = document.getElementById('dmgRecentBody');

    if (!entries || entries.length === 0) {
      tbody.innerHTML = '<tr><td colspan="4" style="text-align:center;color:var(--carbon-400);font-style:italic;padding:1.5rem;">No damage reports yet</td></tr>';
      return;
    }

    tbody.innerHTML = '';
    entries.forEach(entry => {
      const tr = document.createElement('tr');

      // Parse date from timestamp
      let dateStr = '';
      try {
        const d = new Date(entry.timestamp);
        dateStr = String(d.getMonth() + 1).padStart(2, '0') + '/' + String(d.getDate()).padStart(2, '0');
      } catch(e) {
        dateStr = entry.timestamp.substring(0, 5);
      }

      // Determine severity class
      const sevText = (entry.severity || '').toLowerCase();
      let sevClass = 'low';
      if (sevText.includes('critical') || sevText.includes('high') || sevText.includes('safety') || sevText.includes('immediate')) {
        sevClass = 'high';
      } else if (sevText.includes('medium') || sevText.includes('notable')) {
        sevClass = 'medium';
      }

      // Severity display text (short version)
      let sevLabel = 'Low';
      if (sevClass === 'high') sevLabel = 'High';
      else if (sevClass === 'medium') sevLabel = 'Medium';

      tr.innerHTML = `
        <td style="font-family:var(--font-mono);font-size:0.8rem;">${dateStr}</td>
        <td>${entry.component || 'â€”'}</td>
        <td><span class="severity-badge ${sevClass}">\u25CF ${sevLabel}</span></td>
        <td>${entry.driver || 'â€”'}</td>
      `;
      tbody.appendChild(tr);
    });
  }

  // â”€â”€â”€ GENERIC POST HELPER â”€â”€â”€
  async function postToSheet(payload, statusElId) {
    const statusEl = document.getElementById(statusElId);
    if (API_URL === 'YOUR_APPS_SCRIPT_URL_HERE') {
      statusEl.style.color = 'var(--warning)';
      statusEl.textContent = '\u26A0 Set API_URL in the HTML first';
      return false;
    }
    statusEl.style.color = 'var(--carbon-400)';
    statusEl.textContent = 'Submitting\u2026';
    try {
      await fetch(API_URL, {
        method: 'POST',
        mode: 'no-cors',
        headers: { 'Content-Type': 'text/plain' },
        body: JSON.stringify(payload)
      });
      statusEl.style.color = 'var(--success)';
      statusEl.textContent = '\u2713 Submitted â€” refreshing\u2026';
      // Reload dashboard data after a short delay to let the sheet update
      setTimeout(async () => {
        await loadDashboardData();
        statusEl.textContent = '\u2713 Done';
        setTimeout(() => { statusEl.textContent = ''; }, 3000);
      }, 2000);
      return true;
    } catch (err) {
      statusEl.style.color = 'var(--danger)';
      statusEl.textContent = '\u2717 Failed \u2014 check console';
      console.error('Submission error:', err);
      return false;
    }
  }

  // â”€â”€â”€ TELEMETRY SUBMIT â”€â”€â”€
  async function submitTelemetry() {
    const tbody = document.getElementById('telemetryBody');
    const rowEls = tbody.querySelectorAll('tr');
    const rows = [];
    rowEls.forEach(tr => {
      const inputs = tr.querySelectorAll('input');
      const selects = tr.querySelectorAll('select');
      const driver = inputs[0]?.value?.trim();
      if (!driver) return;
      rows.push({
        driver: driver,
        date: inputs[1]?.value || '',
        odoStart: inputs[2]?.value || '',
        odoEnd: inputs[3]?.value || '',
        feel060: selects[0]?.value || '',
        feel100: selects[1]?.value || '',
        notes: inputs[4]?.value || ''
      });
    });
    if (rows.length === 0) {
      const s = document.getElementById('telStatus');
      s.style.color = 'var(--warning)';
      s.textContent = '\u26A0 Fill in at least one row';
      return;
    }
    const ok = await postToSheet({ type: 'telemetry', rows }, 'telStatus');
    if (ok) {
      rowEls.forEach(tr => {
        tr.querySelectorAll('input').forEach(i => i.value = '');
        tr.querySelectorAll('select').forEach(s => s.selectedIndex = 0);
      });
    }
  }

  // â”€â”€â”€ DAMAGE SUBMIT â”€â”€â”€
  async function submitDamage() {
    const component = document.getElementById('dmgComponent').value;
    const severity = document.getElementById('dmgSeverity').value;
    const odometer = document.getElementById('dmgOdometer').value;
    const description = document.getElementById('dmgDescription').value.trim();
    const driver = document.getElementById('dmgDriver').value.trim();
    if (!component || !description || !driver) {
      const s = document.getElementById('dmgStatus');
      s.style.color = 'var(--warning)';
      s.textContent = '\u26A0 Fill in component, description & driver';
      return;
    }
    const ok = await postToSheet({ type: 'damage', component, severity, odometer, description, driver }, 'dmgStatus');
    if (ok) {
      document.getElementById('dmgComponent').selectedIndex = 0;
      document.getElementById('dmgSeverity').selectedIndex = 0;
      document.getElementById('dmgOdometer').value = '';
      document.getElementById('dmgDescription').value = '';
      document.getElementById('dmgDriver').value = '';
    }
  }

  // â”€â”€â”€ AERO SUBMIT â”€â”€â”€
  async function submitAero() {
    const testType = document.getElementById('aeroTestType').value;
    const stability = ratingValues.stabilityRating;
    const downforce = ratingValues.downforceRating;
    const feedback = document.getElementById('aeroFeedback').value.trim();
    if (!testType || !feedback) {
      const s = document.getElementById('aeroStatus');
      s.style.color = 'var(--warning)';
      s.textContent = '\u26A0 Select test type & add feedback';
      return;
    }
    const ok = await postToSheet({ type: 'aero', testType, stability, downforce, feedback }, 'aeroStatus');
    if (ok) {
      document.getElementById('aeroTestType').selectedIndex = 0;
      document.getElementById('aeroFeedback').value = '';
      setRating('stabilityRating', 0);
      setRating('downforceRating', 0);
    }
  }

  // â”€â”€â”€ INIT: Load live data on page load â”€â”€â”€
  loadDashboardData();
</script>

</body>
</html>
